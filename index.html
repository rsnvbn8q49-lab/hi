<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>T∆∞ v·∫•n ƒë·ªãa danh</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: #f0f2f5;
}

.app {
    width: 66%;
    max-width: 900px;
    min-width: 360px;
    height: 100vh;
    margin: auto;
    display: flex;
    flex-direction: column;
    background: #fff;
}

@media (max-width: 900px) {
    .app {
        width: 100%;
    }
}

/* Header */
.header {
    background: linear-gradient(90deg,#2563eb,#4f46e5);
    color: white;
    padding: 14px;
    text-align: center;
    font-size: 18px;
    font-weight: 600;
}

/* Chat area */
#chat {
    flex: 1;
    padding: 16px;
    overflow-y: auto;
    background: #f5f7fb;
}

/* Message row */
.msg-row {
    display: flex;
    margin-bottom: 14px;
    align-items: flex-end;
}

/* Align */
.bot-row { justify-content: flex-start; }
.user-row { justify-content: flex-end; }

/* Avatar */
.avatar {
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    margin: 0 8px;
}

/* Bubble */
.bubble {
    max-width: 65%;
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 15px;
    line-height: 1.5;
}

/* Gemini style */
.bot-bubble {
    background: #ffffff;
    border-bottom-left-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

.user-bubble {
    background: #2563eb;
    color: white;
    border-bottom-right-radius: 6px;
}

/* Time */
.time {
    font-size: 11px;
    color: #6b7280;
    margin-top: 4px;
    text-align: right;
}

/* Input */
.input-area {
    display: flex;
    padding: 12px;
    gap: 10px;
    border-top: 1px solid #ddd;
}

input {
    flex: 1;
    padding: 12px 14px;
    border-radius: 20px;
    border: 1px solid #ccc;
    font-size: 14px;
    outline: none;
}

button {
    padding: 12px 18px;
    border-radius: 20px;
    border: none;
    background: #2563eb;
    color: white;
    font-size: 14px;
    cursor: pointer;
}
button:hover { background: #1e40af; }
</style>
</head>

<body>
<div class="app">

<div class="header" id="title">T∆∞ v·∫•n ƒë·ªãa danh</div>

<div id="chat"></div>

<div class="input-area">
    <input id="question" placeholder="Nh·∫≠p c√¢u h·ªèi..." />
    <button onclick="send()">G·ª≠i</button>
</div>

</div>

<script>
/* ===== ƒê·ªäA DANH ===== */
const params = new URLSearchParams(window.location.search);
const key = params.get("place");

const places = {
    1: "Nh√† C√¥ng T·ª≠ B·∫°c Li√™u",
    2: "Qu·∫£ng Tr∆∞·ªùng H√πng V∆∞∆°ng B·∫°c Li√™u",
    3: "ƒê√¨nh T√¢n H∆∞ng",
    4: "Ch√πa Xi√™m C√°n",
    5: "Di·ªán Gi√≥ B·∫°c Li√™u",
    6: "ƒê·ªìng N·ªçc N·∫°ng",
    7: "Bi·ªÉn Khai Long",
    8: "M≈©i C√† Mau",
    9: "H√≤n ƒê√° B·∫°c",
    10: "U Minh H·∫°",
    11: "C√¥ng Vi√™n VƒÉn H√≥a C√† Mau",
    12: "Qu·∫£ng Tr∆∞·ªùng Phan Ng·ªçc Hi·ªÉn",

};

const placeName = places[key];
if (!placeName) {
    document.body.innerHTML = "<h2 style='text-align:center'>Kh√¥ng t√¨m th·∫•y ƒë·ªãa danh</h2>";
    throw new Error("Invalid place");
}

document.getElementById("title").innerText = placeName;
const chat = document.getElementById("chat");

/* ===== TIME ===== */
function getTime() {
    return new Date().toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"});
}

/* ===== BOT ===== */
function botMsg(text) {
    chat.innerHTML += `
    <div class="msg-row bot-row">
        <div class="avatar">ü§ñ</div>
        <div>
            <div class="bubble bot-bubble">${text}</div>
            <div class="time">${getTime()}</div>
        </div>
    </div>`;
}

/* ===== USER ===== */
function userMsg(text) {
    chat.innerHTML += `
    <div class="msg-row user-row">
        <div>
            <div class="bubble user-bubble">${text}</div>
            <div class="time">${getTime()}</div>
        </div>
        <div class="avatar">üë§</div>
    </div>`;
}

/* ===== GREETING ===== */
botMsg(`Xin ch√†o! T√¥i s·∫Ω t∆∞ v·∫•n th√¥ng tin v·ªÅ <b>${placeName}</b>.`);

/* ===== SEND ===== */
async function send() {
    const input = document.getElementById("question");
    const text = input.value.trim();
    if (!text) return;

    userMsg(text);
    input.value = "";
    chat.scrollTop = chat.scrollHeight;

    const apiKey = "AIzaSyASwQiE4URJxVAsSs65hUoVAkQvmMqemkU";

    const systemPrompt = `
B·∫°n l√† h∆∞·ªõng d·∫´n vi√™n du l·ªãch ƒë·ªãa ph∆∞∆°ng t·∫°i Vi·ªát Nam.

ƒê·ªãa danh ƒëang t∆∞ v·∫•n: ${placeName}

Y√™u c·∫ßu:
- Ch·ªâ tr·∫£ l·ªùi v·ªÅ ${placeName}
- Tr·∫£ l·ªùi b·∫±ng ti·∫øng Vi·ªát
- Th√¥ng tin ph·∫£i ch√≠nh x√°c, d·ªÖ hi·ªÉu
- N·∫øu c√¢u h·ªèi kh√¥ng li√™n quan, tr·∫£ l·ªùi:
"Xin l·ªói, t√¥i ch·ªâ t∆∞ v·∫•n v·ªÅ ${placeName}."

H√£y tr·∫£ l·ªùi nh∆∞ ƒëang n√≥i chuy·ªán v·ªõi du kh√°ch.
`;

const res = await fetch(
    "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent?key=" + apiKey,
    {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            contents: [
                {
                    role: "user",
                    parts: [
                        {
                            text: systemPrompt + "\nC√¢u h·ªèi c·ªßa du kh√°ch: " + text
                        }
                    ]
                }
            ]
        })
    }
);

    const data = await res.json();
    const answer = data.candidates?.[0]?.content?.parts?.[0]?.text || "Kh√¥ng c√≥ ph·∫£n h·ªìi";
    botMsg(answer);
    chat.scrollTop = chat.scrollHeight;
}
</script>

</body>
</html>
